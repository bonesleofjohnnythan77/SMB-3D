#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"
#include "game/level_update.h"
#include "levels/scripts.h"
#include "actors/common1.h"
#include "make_const_nonconst.h"

#include "areas/1/custom.model.inc.h"
#include "levels/bbh/header.h"
extern u8 _bbh_segment_ESegmentRomStart[]; 
extern u8 _bbh_segment_ESegmentRomEnd[];
const LevelScript level_bbh_entry[] = {
INIT_LEVEL(),
LOAD_MIO0(0x07, _bbh_segment_7SegmentRomStart, _bbh_segment_7SegmentRomEnd),
LOAD_RAW(0x1A, _bbhSegmentRomStart, _bbhSegmentRomEnd),
LOAD_RAW(0x0E, _bbh_segment_ESegmentRomStart, _bbh_segment_ESegmentRomEnd),
LOAD_MIO0(0xA,_water_skybox_mio0SegmentRomStart,_water_skybox_mio0SegmentRomEnd),
LOAD_MIO0(8,_common0_mio0SegmentRomStart,_common0_mio0SegmentRomEnd),
LOAD_RAW(15,_common0_geoSegmentRomStart,_common0_geoSegmentRomEnd),
LOAD_MIO0(5,_group1_mio0SegmentRomStart,_group1_mio0SegmentRomEnd),
LOAD_RAW(12,_group1_geoSegmentRomStart,_group1_geoSegmentRomEnd),
LOAD_MIO0(6,_group17_mio0SegmentRomStart,_group17_mio0SegmentRomEnd),
LOAD_RAW(13,_group17_geoSegmentRomStart,_group17_geoSegmentRomEnd),
ALLOC_LEVEL_POOL(),
MARIO(/*model*/ MODEL_MARIO, /*behParam*/ 0x00000001, /*beh*/ bhvMario),
LOAD_MODEL_FROM_GEO(MODEL_BBH_HAUNTED_DOOR,           haunted_door_geo),
LOAD_MODEL_FROM_GEO(MODEL_BBH_STAIRCASE_STEP,         geo_bbh_0005B0),
LOAD_MODEL_FROM_GEO(MODEL_BBH_TILTING_FLOOR_PLATFORM, geo_bbh_0005C8),
LOAD_MODEL_FROM_GEO(MODEL_BBH_TUMBLING_PLATFORM,      geo_bbh_0005E0),
LOAD_MODEL_FROM_GEO(MODEL_BBH_TUMBLING_PLATFORM_PART, geo_bbh_0005F8),
LOAD_MODEL_FROM_GEO(MODEL_BBH_MOVING_BOOKSHELF,       geo_bbh_000610),
LOAD_MODEL_FROM_GEO(MODEL_BBH_MESH_ELEVATOR,          geo_bbh_000628),
LOAD_MODEL_FROM_GEO(MODEL_BBH_MERRY_GO_ROUND,         geo_bbh_000640),
LOAD_MODEL_FROM_GEO(MODEL_BBH_WOODEN_TOMB,            geo_bbh_000658),
LOAD_MODEL_FROM_GEO(22, warp_pipe_geo),
LOAD_MODEL_FROM_GEO(23, bubbly_tree_geo),
LOAD_MODEL_FROM_GEO(24, spiky_tree_geo),
LOAD_MODEL_FROM_GEO(25, snow_tree_geo),
LOAD_MODEL_FROM_GEO(29, haunted_door_geo),
LOAD_MODEL_FROM_GEO(31, metal_door_geo),
LOAD_MODEL_FROM_GEO(32, woodplank_geo),
LOAD_MODEL_FROM_GEO(34, castle_door_0_star_geo),
LOAD_MODEL_FROM_GEO(35, castle_door_1_star_geo),
LOAD_MODEL_FROM_GEO(36, castle_door_3_stars_geo),
LOAD_MODEL_FROM_GEO(37, key_door_geo),
LOAD_MODEL_FROM_GEO(38, castle_door_geo),
LOAD_MODEL_FROM_GEO(217, metal_boxC5_geo),
// LOAD_MODEL_FROM_DL(132,0x08025f08,4),
// LOAD_MODEL_FROM_DL(158,0x0302c8a0,4),
// LOAD_MODEL_FROM_DL(159,0x0302bcd0,4),
// LOAD_MODEL_FROM_DL(161,0x0301cb00,4),
// LOAD_MODEL_FROM_DL(164,0x04032a18,4),
// LOAD_MODEL_FROM_DL(201,0x080048e0,4),
// LOAD_MODEL_FROM_DL(218,0x08024bb8,4),
JUMP_LINK(script_func_global_1),
JUMP_LINK(script_func_global_2),
JUMP_LINK(script_func_global_18),
JUMP_LINK(local_area_bbh_1_),
FREE_LEVEL_POOL(),
MARIO_POS(1,135,-6558,0,6464),
CALL(/*arg*/ 0, /*func*/ lvl_init_or_update),
CALL_LOOP(/*arg*/ 1, /*func*/ lvl_init_or_update),
CLEAR_LEVEL(),
SLEEP_BEFORE_EXIT(/*frames*/ 1),
EXIT(),
};
const LevelScript local_area_bbh_1_[] = {
AREA(1,Geo_bbh_1_0x1201700),
TERRAIN(col_bbh_1_0xe0b66a0),
SET_BACKGROUND_MUSIC(0,43),
TERRAIN_TYPE(0),
JUMP_LINK(local_objects_bbh_1_),
JUMP_LINK(local_warps_bbh_1_),
END_AREA(),
RETURN()
};
const LevelScript local_objects_bbh_1_[] = {
OBJECT_WITH_ACTS(0,281,-1430,-13236,0,180,0,0xa0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(0,-548,-1040,-16571,0,-154,0,0xb0000, bhvWarp,31),
OBJECT_WITH_ACTS(0,-533,5114,-9223,0,-153,0,0xc0000, bhvWarpPipe,31),
OBJECT_WITH_ACTS(215,13037,603,2917,0,107,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,7235,4743,-5430,0,-151,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-9160,-1577,11455,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,4913,-1786,19916,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,3478,-1026,16064,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-5691,-2151,6241,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,4671,-1418,1618,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,20137,-2505,-3473,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(0,-12522,-1695,8276,0,0,0,0x1000000, bhvBowserCourseRedCoinStar,31),
OBJECT_WITH_ACTS(88,3017,4682,-8722,0,-90,0,0x0, bhvThwomp,31),
OBJECT_WITH_ACTS(88,6341,4682,-8736,0,-90,0,0x0, bhvThwomp,31),
OBJECT_WITH_ACTS(88,4659,4682,-7423,0,180,0,0x0, bhvThwomp,31),
OBJECT_WITH_ACTS(206,3844,4838,-8729,0,0,0,0x0, bhvSnufit,31),
OBJECT_WITH_ACTS(206,5484,4838,-8711,0,0,0,0x0, bhvSnufit,31),
OBJECT_WITH_ACTS(206,4588,4838,-6259,0,0,0,0x0, bhvSnufit,31),
OBJECT_WITH_ACTS(206,4667,4838,-9951,0,0,0,0x0, bhvSnufit,31),
OBJECT_WITH_ACTS(116,4714,4743,-10828,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,7255,4743,-8729,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,1994,4743,-5508,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(32,4646,4687,-7105,0,0,0,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,4646,4687,-7105,0,0,90,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,4646,4687,-7105,0,0,180,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,4646,4687,-7105,0,0,270,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,3353,4619,-8741,0,-90,90,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,3353,4619,-8741,0,-90,180,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,3353,4619,-8741,0,-90,270,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,3353,4619,-8741,0,-90,0,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,5872,4600,-8716,0,-90,90,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,5872,4600,-8716,0,-90,0,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,5872,4600,-8716,0,-90,270,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(32,5872,4600,-8716,0,-90,180,0x0, bhvDorrie,31),
OBJECT_WITH_ACTS(0,5902,4675,-5374,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,5902,4515,-5374,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,1333,-3281,11792,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,1333,-3441,11792,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,2660,-1558,11792,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,2660,-1718,11792,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,5099,-1875,10649,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,5099,-2035,10649,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,4728,2834,-1835,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,4728,2674,-1835,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,4750,-755,2827,0,0,0,0xff0000, bhvPoleGrabbing,31),
OBJECT_WITH_ACTS(217,2180,-2187,11792,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,2180,-2027,11792,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,1700,-2831,11792,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,1700,-2671,11792,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(0,4750,2699,2827,0,0,0,0xff0000, bhvPoleGrabbing,31),
OBJECT_WITH_ACTS(89,6023,-2586,4894,0,0,0,0x0, bhvHeaveHo,31),
OBJECT_WITH_ACTS(89,6446,-2586,8532,0,0,0,0x0, bhvHeaveHo,31),
OBJECT_WITH_ACTS(89,-8989,-2586,10104,0,0,0,0x0, bhvHeaveHo,31),
OBJECT_WITH_ACTS(116,6074,-1562,3674,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,7084,-1466,4391,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,7321,-1562,5483,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,7150,-1562,8278,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,7000,-1562,9824,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,608,-1802,5142,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,-1219,-1802,5695,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(84,4619,3350,-4581,0,0,0,0x0, bhvBulletBill,31),
OBJECT_WITH_ACTS(0,3169,4675,-5630,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,3169,4515,-5630,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(0,4470,-4507,16734,0,0,0,0x0, bhvLargeFishGroup,31),
OBJECT_WITH_ACTS(0,4470,-4507,16734,0,0,0,0x0, bhvLargeFishGroup,31),
OBJECT_WITH_ACTS(0,6120,-4507,13560,0,0,0,0x0, bhvFish3,31),
OBJECT_WITH_ACTS(0,6120,-4507,13560,0,0,0,0x0, bhvFish3,31),
OBJECT_WITH_ACTS(0,2426,-4507,16296,0,0,0,0x0, bhvFishGroup,31),
OBJECT_WITH_ACTS(0,1069,-4507,14011,0,0,0,0x0, bhvFish2,31),
OBJECT_WITH_ACTS(122,-14003,-1823,9983,0,0,0,0x0, bhvStar,31),
OBJECT_WITH_ACTS(180,8050,927,2898,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,11612,927,2692,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(116,1244,-1746,8727,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,750,-1761,9217,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,4742,1728,2830,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,4742,-266,2830,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,4742,4117,2830,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(0,-4514,-2586,8295,0,0,0,0x0, bhvGoombaTripletSpawner,31),
OBJECT_WITH_ACTS(0,1608,-1796,6927,0,0,0,0x0, bhvGoombaTripletSpawner,31),
OBJECT_WITH_ACTS(0,304,-3141,19730,0,0,0,0x0, bhvGoombaTripletSpawner,31),
OBJECT_WITH_ACTS(116,2281,-2448,3801,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,1091,-1796,7083,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,-5844,-2161,7664,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,-7275,-1577,11448,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,-9256,-1577,8238,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,-7186,-1577,8178,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(116,2678,-2461,19743,0,0,0,0x0, bhvYellowCoinBig,31),
OBJECT_WITH_ACTS(0,938,-3141,19124,0,0,0,0x110000, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,3537,-2653,19669,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,3537,-2813,19669,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(188,411,-1616,16963,0,0,0,0x0, bhvBobomb,31),
OBJECT_WITH_ACTS(188,650,-2126,18208,0,0,0,0x0, bhvBobomb,31),
OBJECT_WITH_ACTS(220,3459,-870,13700,0,0,0,0x0, bhvFlyGuy,31),
OBJECT_WITH_ACTS(0,4750,521,2827,0,0,0,0xff0000, bhvPoleGrabbing,31),
OBJECT_WITH_ACTS(0,3908,-2392,4395,0,0,0,0x0, Bhv_Custom_0x130005d0,31),
OBJECT_WITH_ACTS(217,3908,-2552,4395,0,0,0,0x0, bhvPushableMetalBox,31),
OBJECT_WITH_ACTS(212,3581,-861,505,0,0,0,0x0, bhv1Up,31),
OBJECT_WITH_ACTS(212,7124,-677,20051,0,0,0,0x0, bhv1Up,31),
OBJECT_WITH_ACTS(212,-11218,-1588,11216,0,0,0,0x0, bhv1Up,31),
RETURN()
};
const LevelScript local_warps_bbh_1_[] = {
WARP_NODE(10,9,1,10,0),
WARP_NODE(11,4,1,12,0),
WARP_NODE(12,9,1,11,0),
WARP_NODE(13,9,1,14,0),
WARP_NODE(14,9,1,13,0),
WARP_NODE(240,16,1,4,0),
WARP_NODE(241,16,1,241,0),
WARP_NODE(0,9,1,10,0),
WARP_NODE(1,9,1,10,0),
WARP_NODE(2,9,1,10,0),
WARP_NODE(3,9,1,10,0),
WARP_NODE(4,9,1,10,0),
WARP_NODE(5,9,1,10,0),
WARP_NODE(6,9,1,10,0),
RETURN()
};
